{
  "meta": {
    "title": "Hvor stort kan du bygge?"
  },
  "schema": [
    {
      "id": "start",
      "type": "Page",
      "heading": "Er eiendommen regulert?",
      "children": [
        {
          "id": "regulation",
          "property": "regulation",
          "type": "Radio",
          "heading": "Er eiendommen regulert?",
          "text": "Fant du en reguleringsplan hos kommunen, er eiendommen regulert.",
          "options": [
            {
              "id": "regulation.yes",
              "type": "Answer",
              "heading": "Ja, eiendommen er regulert.",
              "value": "yes"
            },
            {
              "id": "regulation.no",
              "type": "Answer",
              "heading": "Nei, eiendommen er ikke regulert.",
              "value": "no"
            }
          ]
        },
        {
          "type": "Branch",
          "branches": [
            {
              "test": {
                "field": "regulation",
                "operator": "eq",
                "value": "yes"
              },
              "children": [
                {
                  "id": "finneskommuneplanen",
                  "property": "finneskommuneplanen",
                  "type": "Radio",
                  "heading":
                    "Er det bestemmelser i kommuneplanen eller -delplanen som sier noe om tillatt grad av utnytting?",
                  "options": [
                    {
                      "id": "finneskommuneplanen.yes",
                      "type": "Answer",
                      "heading": "Ja",
                      "value": "yes"
                    },
                    {
                      "id": "finneskommuneplanen.no",
                      "type": "Answer",
                      "heading": "Nei",
                      "value": "no"
                    }
                  ]
                }
              ]
            },
            {
              "test": {
                "field": "regulation",
                "operator": "eq",
                "value": "no"
              },
              "children": [
                {
                  "id": "isreguleringsplanen",
                  "property": "isreguleringsplanen",
                  "type": "Radio",
                  "heading":
                    "Står det noe i kommuneplanen eller delplanen om at den gjelder foran reguleringsplanen?",
                  "text":
                    "Hvis reguleringsplanen er vedtatt senere enn kommuneplanen/-delplanen, er det reguleringsplanen som gjelder, og du kan svare nei.",
                  "options": [
                    {
                      "id": "isreguleringsplanen.yes",
                      "type": "Answer",
                      "heading": "Ja, den gjelder foran reguleringsplanen",
                      "value": "yes"
                    },
                    {
                      "id": "isreguleringsplanen.no",
                      "type": "Answer",
                      "heading": "Nei, det står ingenting om det",
                      "value": "no"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "Branch",
          "branches": [
            {
              "test": {
                "type": "and",
                "clauses": [
                  {
                    "field": "regulation",
                    "operator": "eq",
                    "value": "yes"
                  },
                  {
                    "field": "finneskommuneplanen",
                    "operator": "eq",
                    "value": "yes"
                  }
                ]
              },
              "children": [
                {
                  "id": "kommuneplanen",
                  "property": "kommuneplanen",
                  "type": "Radio",
                  "heading": "Hvordan defineres grad av utnytting i kommuneplanen?",
                  "options": [
                    {
                      "id": "kommuneplanen.bya",
                      "type": "Answer",
                      "heading": "BYA",
                      "value": "bya"
                    },
                    {
                      "id": "kommuneplanen.pbya",
                      "type": "Answer",
                      "heading": "%BYA",
                      "value": "pbya"
                    },
                    {
                      "id": "kommuneplanen.bra",
                      "type": "Answer",
                      "heading": "BRA",
                      "value": "bra"
                    },
                    {
                      "id": "kommuneplanen.pbra",
                      "type": "Answer",
                      "heading": "%BRA",
                      "value": "pbra"
                    },
                    {
                      "id": "kommuneplanen.tbra",
                      "type": "Answer",
                      "heading": "T-BRA",
                      "value": "tbra"
                    },
                    {
                      "id": "kommuneplanen.ptu",
                      "type": "Answer",
                      "heading": "%TU",
                      "value": "ptu"
                    },
                    {
                      "id": "kommuneplanen.none",
                      "type": "Answer",
                      "heading": "Ingen av disse",
                      "value": "none"
                    }
                  ]
                }
              ]
            },
            {
              "test": {
                "type": "and",
                "clauses": [
                  {
                    "field": "regulation",
                    "operator": "eq",
                    "value": "yes"
                  },
                  {
                    "field": "finneskommuneplanen",
                    "operator": "eq",
                    "value": "no"
                  }
                ]
              },
              "children": [
                {
                  "id": "reguleringsplanen",
                  "property": "reguleringsplanen",
                  "type": "Radio",
                  "heading": "Hvordan defineres grad av utnytting i reguleringsplanen?",
                  "options": [
                    {
                      "id": "reguleringsplanen.bya",
                      "type": "Answer",
                      "heading": "BYA",
                      "value": "bya"
                    },
                    {
                      "id": "reguleringsplanen.pbya",
                      "type": "Answer",
                      "heading": "%BYA",
                      "value": "pbya"
                    },
                    {
                      "id": "reguleringsplanen.bra",
                      "type": "Answer",
                      "heading": "BRA",
                      "value": "bra"
                    },
                    {
                      "id": "reguleringsplanen.pbra",
                      "type": "Answer",
                      "heading": "%BRA",
                      "value": "pbra"
                    },
                    {
                      "id": "reguleringsplanen.tbra",
                      "type": "Answer",
                      "heading": "T-BRA",
                      "value": "tbra"
                    },
                    {
                      "id": "reguleringsplanen.ptu",
                      "type": "Answer",
                      "heading": "%TU",
                      "value": "ptu"
                    },
                    {
                      "id": "reguleringsplanen.none",
                      "type": "Answer",
                      "heading": "Ingen av disse",
                      "value": "none"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "Branch",
          "branches": [
            {
              "test": {
                "type": "and",
                "clauses": [
                  {
                    "field": "regulation",
                    "operator": "eq",
                    "value": "no"
                  },
                  {
                    "field": "isreguleringsplanen",
                    "operator": "eq",
                    "value": "yes"
                  }
                ]
              },
              "children": [
                {
                  "id": "reguleringsplanen",
                  "property": "reguleringsplanen",
                  "type": "Radio",
                  "heading": "Hvordan defineres grad av utnytting i reguleringsplanen?",
                  "options": [
                    {
                      "id": "reguleringsplanen.bya",
                      "type": "Answer",
                      "heading": "BYA",
                      "value": "bya"
                    },
                    {
                      "id": "reguleringsplanen.pbya",
                      "type": "Answer",
                      "heading": "%BYA",
                      "value": "pbya"
                    },
                    {
                      "id": "reguleringsplanen.bra",
                      "type": "Answer",
                      "heading": "BRA",
                      "value": "bra"
                    },
                    {
                      "id": "reguleringsplanen.pbra",
                      "type": "Answer",
                      "heading": "%BRA",
                      "value": "pbra"
                    },
                    {
                      "id": "reguleringsplanen.tbra",
                      "type": "Answer",
                      "heading": "T-BRA",
                      "value": "tbra"
                    },
                    {
                      "id": "reguleringsplanen.ptu",
                      "type": "Answer",
                      "heading": "%TU",
                      "value": "ptu"
                    },
                    {
                      "id": "reguleringsplanen.none",
                      "type": "Answer",
                      "heading": "Ingen av disse",
                      "value": "none"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "Branch",
          "branches": [
            {
              "test": {
                "type": "and",
                "clauses": [
                  {
                    "field": "regulation",
                    "operator": "eq",
                    "value": "no"
                  },
                  {
                    "field": "isreguleringsplanen",
                    "operator": "eq",
                    "value": "no"
                  }
                ]
              },
              "children": [
                {
                  "id": "someerror",
                  "type": "Error",
                  "simple": true,
                  "children": [
                    {
                      "id": "insufficientKommuneplanen",
                      "type": "Text",
                      "warning": true,
                      "heading":
                        "Beklager, da kan du ikke bruke denne veilederen. Ta kontakt med kommunen din, så hjelper de deg videre."
                    },
                    {
                      "id": "failedButCanGoOn",
                      "type": "Text",
                      "text":
                        "Hvordan burde denne feilmeldingen fungere? Det må vi få avklart. Skal vi skru av veien videre når man får den?"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "Branch",
          "branches": [
            {
              "test": {
                "type": "and",
                "clauses": [
                  {
                    "field": "kommuneplanen",
                    "operator": "neq",
                    "value": "bra"
                  },
                  {
                    "field": "kommuneplanen",
                    "operator": "neq",
                    "value": "pbra"
                  },
                  {
                    "field": "kommuneplanen",
                    "operator": "required"
                  }
                ]
              },
              "children": [
                {
                  "id": "regulationTime",
                  "property": "regulationTime",
                  "type": "Radio",
                  "heading": "Når er kommuneplanen vedtatt?",
                  "options": [
                    {
                      "id": "regulationTime.before",
                      "type": "Answer",
                      "heading": "Før 1.7.1997",
                      "value": "before"
                    },
                    {
                      "id": "regulationTime.after",
                      "type": "Answer",
                      "heading": "Etter 1.7.1997",
                      "value": "after"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "Branch",
          "branches": [
            {
              "test": {
                "type": "and",
                "clauses": [
                  {
                    "field": "reguleringsplanen",
                    "operator": "neq",
                    "value": "pbra"
                  },
                  {
                    "field": "reguleringsplanen",
                    "operator": "neq",
                    "value": "pbra"
                  },
                  {
                    "field": "reguleringsplanen",
                    "operator": "required"
                  }
                ]
              },
              "children": [
                {
                  "id": "regulationTime",
                  "property": "regulationTime",
                  "type": "Radio",
                  "heading": "Når er reguleringsplanen vedtatt?",
                  "options": [
                    {
                      "id": "regulationTime.before",
                      "type": "Answer",
                      "heading": "Før 1.7.1997",
                      "value": "before"
                    },
                    {
                      "id": "regulationTime.after",
                      "type": "Answer",
                      "heading": "Etter 1.7.1997",
                      "value": "after"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "Branch",
          "branches": [
            {
              "test": {
                "type": "or",
                "clauses": [
                  {
                    "field": "kommuneplanen",
                    "operator": "required"
                  },
                  {
                    "field": "reguleringsplanen",
                    "operator": "required"
                  }
                ]
              },
              "children": [
                {
                  "id": "utilizationArea",
                  "property": "utilizationArea",
                  "type": "Number",
                  "heading": "Hva er tillatt grad av utnytting i kommuneplanen?",
                  "minimum": 0
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "page1",
      "type": "Page",
      "heading": "Om eiendommen",
      "children": [
        {
          "id": "propertyArea",
          "property": "propertyArea",
          "type": "Number",
          "heading": "Hvor stor er eiendommen?",
          "unit": "m<sup>2</sup>",
          "minimum": 0,
          "text":
            "<p>Arealet på eiendommen finner du i et matrikkelbrev (tidligere ble dette kalt målebrev). Matrikkelbrev får du fra kommunen. Du kan <a href=\"http://www.seeiendom.no/\">også se eiendommens areal på Kartverkets nettsted www.seeiendom.no</a></p>"
        },
        {
          "id": "nonSettlementArea",
          "property": "nonSettlementArea",
          "type": "Number",
          "heading": "Hvor stor del av eiendommen er regulert til noe annet enn bebyggelse?",
          "minimum": 0,
          "summary": "Hva er byggeområde?",
          "details":
            "<p>Når du skal beregne grad av utnytting, skal du bare bruke arealet som er regulert til byggeområde. Du skal ikke ta med deler av eiendommen som er regulert til for eksempel:</p><ul><li>felles adkomstvei</li><li>gang- og sykkelvei</li><li>friområde</li><li>grøntareal</li><li>fellesområder</li></ul><img src=\"/img/figur_01.png\" alt=\"Utsnitt av kart\"><h3>Dette kartet er bare et eksempel!</h3><ul><li>BLÅ: Eiendommens grenser</li><li>GRÅ: Vei og felles adkomst</li><li>GRØNN: Friområde</li><li>GUL: Byggeområde</li></ul><p>Du skal altså måle alt bortsett fra det gule området.</p><p>Sjekk din eiendom i reguleringsplan eller kommuneplan. Mål <strong>alle</strong> areal som <strong>ikke</strong> er regulert til byggeområde.</p>"
        }
      ]
    },
    {
      "id": "Page2",
      "type": "Page",
      "heading": "Hvor mye av eiendommen din er allerede bebygd?",
      "lead":
        "Du skal måle areal i BYA. Det betyr bebygd areal.<p>Vi må finne en løsning for \"Hva er bebygd areal?\" lenken. Skal vi lage en egen side?",
      "children": [
        {
          "id": "areaToBeDemolished",
          "property": "areaToBeDemolished",
          "type": "Group",
          "simple": true,
          "children": [
            {
              "id": "tempBYA",
              "property": "tempBYA",
              "type": "Number",
              "heading": "Areal bolig i BYA?",
              "minimum": 0
            },
            {
              "id": "tempgarasje",
              "property": "tempgarasje",
              "type": "Number",
              "heading": "Areal frittstående garasje",
              "minimum": 0
            },
            {
              "id": "tempfrittstaaend",
              "property": "tempfrittstaaend",
              "type": "Number",
              "heading": "Areal frittstående bod/uthus/dukkehus",
              "minimum": 0
            },
            {
              "id": "tempkonstruksjon",
              "property": "tempkonstruksjon",
              "type": "Number",
              "heading": "Areal for annen frittstående konstruksjon",
              "minimum": 0
            }
          ]
        }
      ]
    },
    {
      "id": "Page3",
      "type": "Page",
      "heading": "Hvor mye av dagens bebyggelse skal rives?",
      "children": [
        {
          "id": "arealBebyggelseSomSkalRives",
          "property": "arealBebyggelseSomSkalRives",
          "type": "Number",
          "heading": "Areal som skal rives",
          "text":
            "Du skal måle areal som skal rives i TODO VARIABEL HER BRA. Det betyr bruksareal.",
          "validator": {
            "test": {
              "field": "arealBebyggelseSomSkalRives",
              "operator": "lte",
              "value": { "field": "propertyArea" }
            },
            "error": "Areal som skal rives må være mindre enn bebygget areal"
          }
        },
        {
          "id": "tempebygd",
          "property": "tempebygd",
          "type": "Number",
          "heading": "Hvor stort blir det nye du skal bygge?",
          "text": "Du skal måle areal som skal bygges i BYA. Det betyr bebygd areal.",
          "minimum": 0
        }
      ]
    },
    {
      "id": "Page5",
      "type": "Page",
      "heading": "Parkering",
      "lead":
        "Parkeringsplasser som ligger på terreng (altså ikke i garasje) blir tatt med i grad av utnytting.<p>Du finner som regel kravene som gjelder for din eiendom i planbestemmelsen du har funnet fram tidligere: Enten reguleringsplanen eller kommuneplanen. Du kan også sjekke om kommunen har en parkeringsnorm.</p>",
      "details": "some text",
      "summary": "other text",
      "children": [
        {
          "id": "requiredParkingSpots",
          "property": "requiredParkingSpots",
          "type": "Number",
          "heading": "Hvor mange parkeringsplasser kreves totalt på eiendommen?",
          "minimum": 0
        },
        {
          "id": "minimumParkinglotsForPlan",
          "property": "tempparkingradio",
          "type": "Radio",
          "heading": "Har reguleringsplanen krav til minimum antall parkeringsplasser på terreng?",
          "options": [
            {
              "id": "minimumParkinglotsForPlan.yes",
              "type": "Answer",
              "heading": "Ja",
              "value": "yes"
            },
            {
              "id": "minimumParkinglotsForPlan.no",
              "type": "Answer",
              "heading": "Nei",
              "value": "no"
            }
          ]
        },
        {
          "type": "Branch",
          "branches": [
            {
              "test": {
                "field": "requiredParkingSpots",
                "operator": "eq",
                "value": "yes"
              },
              "children": [
                {
                  "id": "requiredParkingSpotsTerrain",
                  "property": "requiredParkingSpotsTerrain",
                  "type": "Number",
                  "heading": "Hvor mange parkeringsplasser på terreng kreves?",
                  "minumum": 0
                }
              ]
            }
          ]
        },
        {
          "type": "Branch",
          "branches": [
            {
              "test": {
                "field": "tempnumberofparking",
                "operator": "gt",
                "value": 0
              },
              "children": [
                {
                  "id": "tempnumberofparking",
                  "property": "responsiblefirm",
                  "type": "Number",
                  "heading":
                    "Sier parkeringsreglene for din eiendom noe om hvor stor hver parkeringsplass må være? Hvis det ikke står noe, er det 18 m2.",
                  "minumum": 0
                }
              ]
            }
          ]
        },
        {
          "id": "numberOfParkinglotsInCarport",
          "property": "numberOfParkinglotsInCarport",
          "type": "Number",
          "heading": "Antall parkeringsplasser i garasje/carport",
          "minimum": 0
        },
        {
          "id": "parkeringssum",
          "property": "parkeringsum",
          "type": "Sum",
          "values": ["arealBebyggelseSomSkalRives", "propertyArea", "nonSettlementArea"],
          "heading": "SUM",
          "optional": true,
          "text": "Dette er en sum av noe slag"
        }
      ]
    },
    {
      "id": "hooray",
      "type": "Result",
      "heading": "Resultatsiden heading",
      "errorheading": "Du har ikke svart på alle spørsmålene",
      "lead": "Fancy result lead",
      "errorlead":
        "Vi kan ikke gi deg et ordentlig resultat før du har svart på alle spørsmålene i veiviseren. Du kan se hvilke spørsmål du ikke har svart på i oppsummeringen under. Der kan du også klikke deg inn på hvert steg i veiviseren for å legge til og endre dine svar.",
      "exporter": "dataExport",
      "children": [
        {
          "id": "somesum",
          "property": "somesum",
          "type": "Sum",
          "values": ["arealBebyggelseSomSkalRives", "propertyArea", "nonSettlementArea"],
          "heading": "SUM",
          "optional": true,
          "text": "Dette er en sum av noe slag"
        }
      ]
    }
  ]
}
